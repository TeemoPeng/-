## 异步及单线程

什么是单线程？单线程指的就是在同一时间，只能做一件事，也可以理解为，同一时间，只能执行一个代码块。

那javascript为什么要是单线程呢？javasscript是可以操作DOM结构的，假如现在有两个线程同时进行，一个线程新增DOM节点，另一个线程删除这个DOM节点，那么浏览器就无法判断到底应该以哪个线程为准了，为了避免这样的冲突，所以将javascript设计成了单线程。

单线程，就意味着，所有任务都需要排队，一个任务执行完了，才到下一个任务。那假如前面一个任务耗时很长，那后面一个任务不是得一直等待吗？为了解决这种问题，javascript设计出了异步。

	var a = 100;
	setTimeout(function(){
	  console.log(a);
	},1000)
	a = 300;

如上代码，第一行定义了一个a变量，第2-4行定义了一个setTimeout方法，方法里将a打印出来，第五行将a赋值为300。那么最终的打印结果会是300。

在javascript，任务分为两种，同步任务、异步任务。在javascript主线程上，执行的是同步任务，而在主线程之外，还有一个异步队列，用来存放异步任务。

只有当主线程的同步任务执行完了，才会去异步队列里寻找，看看有没有需要执行的任务，如果有，就把它放到主线程去执行，主线程任务执行完了，再去异步队列里将异步任务拿出来执行，这是一个不断循环的过程，称为**事件轮询（event-loop)**

回到上面的代码，程序执行到第二行的时候，发现这个方法是个异步任务，然后将其放入异步队列，先执行后面的代码，也就是第五行的 a = 300；这个时候主线程执行完了，会到异步队列里去查找，发现有异步任务，然后将其放入主线程执行，这个时候打印出a，a已经被赋值成了300，所以打印300。
